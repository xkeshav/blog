---
title: "How to create NPM package without bundler"
description: "create a minimal typescript based npm package without any bundler."
publishDate: "19 Feb 2024"
updatedDate: "20 Feb 2024"
coverImage:
  src: "./npm-info.png"
  alt: "Npm Homepage"
tags: ["npm", "javascript", "typescript"]
---

#  What is NPM Package ?

working with javascript/typescript; sometime we create some utility methods or useful code snippet which we copy in our several projects, here some npm package handy.

in this post we will create a typescript bassed npm package and how to test locally and use it.

## Benefit of builidng npm package

- it free, you can create a account on [npm](https://npmjs.org) , I would suggest to enable 2FA so it would be better while publishing the package
- its reusable, no need to copy and save code snippet various places.
- learn about package.json and how build and install works under the hood.

## lets' start

1. install typescript globally

```sh
> npm install typescript -g
```

2. create new folder and run

```sh
> npm init
```
3. this will ask few questions and when finished , it will generate a *package.json* file in your folder,
alternatively you can run `npm init --yes` also

Tip: create a scoped package (i.e. name starts with `@` ) so that will be unique,

added few necessary scripts, you can copy it from below

```json
"scripts": {
  "build": "npx tsc",
  "prepublishOnly": "npm run build",
  "version": "npm publish --access=public"
}
```
#### package.json

```json title="package.json"
{
  "name": "@xkeshav/day",
  "version": "1.3.0",
  "description": "A npm package which return milliseconds in one day.",
  "main": "./lib/index.js",
  "types": "./lib/index.d.ts",
  "repository": {
    "type": "github",
    "url": "https://github.com/<username>/<project_name.git>"
  },
  "homepage": "https://github.com/<username>/<project_name.git>",
  "scripts": {
    "build": "npx tsc",
    "prepublishOnly": "npm run build",
    "version": "npm publish --access=public"
  },
  "keywords": [
    "day",
    "typescript",
    "javascript",
    "xkeshav"
  ],
  "files": [
    "./lib/**"
  ],
  "author": "Keshav Mohta<@xkeshav>",
  "license": "MIT",
  "dependencies": {
    "typescript": "^5.3.3"
  }
}
```
here important properties are *files*, *name* and *main*

  - *files* will contain files, which will be downloaded when someone do `npm install your package`
  - *name* is the name of package which is used to indicate when someone do npm install, in my case here it will be `npm install @xkeshav/day`
  - we are using typescript so *main* and *types* will be there and there file location will be from *lib* folder

4. create *tsconfig.json* file using

```sh
> tsc -- init
```

it will generate default tsconfig.json, you can remove many of rules. below is my *tsconfig.json* file content


#### tsconfig.json
```json
{
  "compilerOptions": {
    "incremental": true,
    "target": "es5",
    "module": "commonjs",
    "declaration": true,
    "outDir": "./lib",
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "skipLibCheck": true
  }
  ,"include": ["src"]
}

```
Note: here `outDir` will be same as `files` in *package.json*

5. now create *src/index.ts* file and add your own code which you want to include in the package, use `export` keyword; below is the content of file

```ts
export const oneDay = 5**5 * 4**4 * 3**3 * 2**2 * 1**1;
```

here in my package , named export a constant.

4. build the package before publish and check the code in *lib* folder

```sh
> npm run build
```

## How to test locally?

before publish , if you want to verify whether our package will work as expected or not then we can test with 2 approach

### npm link way

after the build, run below command on same folder

```sh
> npm link
```

now go to any project which is npm based and typescript supported and run below

```sh
> npm link @xkeshav/day
```

and now in any typescript file write

```ts
import { oneDay } from @xkeshav/day

console.log({oneDay});
```

you are good to check. if you find any issue in your package; then run

```sh
> npm unlink @xkeshav/day
```

and do changes in your main package and again repeat the same process.

### npm pack approach

go to your project where custom npm package is, and run

```sh
> npm pack
```

which will output like this

```sh
npm notice
npm notice package: @xkeshav/day@1.3.0
npm notice === Tarball Contents ===
npm notice 1.1kB LICENSE
npm notice 493B  README.md
npm notice 37B   lib/index.d.ts
npm notice 203B  lib/index.js
npm notice 713B  package.json
npm notice === Tarball Details ===
npm notice name:          @xkeshav/day
npm notice version:       1.3.0
npm notice filename:      xkeshav-day-1.3.0.tgz
npm notice package size:  1.5 kB
npm notice unpacked size: 2.5 kB
npm notice shasum:        46daa0d9cdcc34ef5d55c7c0d04d68f1f820bba6
npm notice integrity:     sha512-hKr+wS9W3OMvK[...]+zKaFIbms6NWQ==
npm notice total files:   5
npm notice
xkeshav-day-1.3.0.tgz
```

this  command wll generate a `tar.gz` file in the same folder, copy this file and paste in other project you want to use it, go to that project root and run

```sh
> npm install xkeshav-day-1.3.0.tgz
```

this will entry in the *package.json* file as below

```json
  "dependencies": {
    "@xkeshav/day": "file:xkeshav-day-1.3.0.tgz"
	}
```
and now you can use the same way

```ts
import { oneDay } from @xkeshav/day


console.log({oneDay});
```

if something wrong then do `npm uninstall xkeshav-day-1.3.0.tgz` and fix in the package and try


## Publish

now once you verified your package locally, its time to publish, for that

make sure you are logged in to your npm account prior to run below command

now go to your project root and run

```sh
> npm publish --access=public
```

this command will pause on one place and asked to _Enter_ and when you hit Enter, it will open npm OTP page in the browser and that page will ask to enter OTP ( if 2FA enabled ) and it will publish the package.

## Update the version

if you want to update then update the version in package.json and repeat same process to verify in local or run

```sh
> npm version <patch|minor|major>
```

then publish it.


you can see all your packages under your profile > packages in npm website.

Thanks.
